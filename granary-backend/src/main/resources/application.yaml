spring:
  application:
    name: granary-backend
  datasource:
    url: jdbc:postgresql://localhost:5432/granary
    username: granary
    password: granary
  jpa:
    open-in-view: false
    hibernate:
      ddl-auto: update
    show-sql: true
  flyway: # <-- Correctly nested under 'spring'
    enabled: true
    locations: classpath:db/migration
    baseline-on-migrate: true
    baseline-version: 0
    validate-on-migrate: true
    clean-disabled: true
  profiles:
    active: ${SPRING_PROFILES_ACTIVE:dev}
  
server:
  port: 8080

application:
  security:
    jwt:
      secret-key: ZJ7iN0XgB1RkC5yTf2sLwA6qW3mG8vHj9xYdO4tP0uEaM7zS5bVpQyXrCgIhEeFf
      expiration: 86400000

app:
  cors:
    allowed-origin: ${APP_CORS_ALLOWED_ORIGIN:http://localhost:5173}
  base-url: http://localhost:8080
  
storage:
  location: uploads

mpesa:
  is-production: false
  api:
    auth-url: https://sandbox.safaricom.co.ke/oauth/v1/generate?grant_type=client_credentials
    b2c-url: https://sandbox.safaricom.co.ke/mpesa/b2c/v3/paymentrequest
    result-url: YOUR_PUBLIC_HTTPS_DOMAIN/api/mpesa/b2c-callback
    stk-push-url: https://sandbox.safaricom.co.ke/mpesa/stkpush/v1/processrequest
    queue-timeout-url: YOUR_PUBLIC_HTTPS_DOMAIN/api/mpesa/b2c-timeout
  credentials:
    consumer-key: YOUR_APP_CONSUMER_KEY
    consumer-secret: YOUR_APP_CONSUMER_SECRET
    short-code: 600XXX
    initiator-name: testapi
    initiator-password: PlaintextPassword123
  security:
    cert-path: classpath:certs/safaricom_sandbox.cer
